<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L·ªãch Tr√¨nh Ch·∫°y M√°y ‚ú®</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #c3d9ff, #f0f5ff);
  background-size: 400% 400%;
  animation: bgMove 12s ease infinite;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; 
  align-items: center;
  min-height: 100vh;
  margin: 0;
  /* THAY ƒê·ªîI: Gi·∫£m padding-top xu·ªëng c√≤n 10px ƒë·ªÉ s√°t m√©p tr√™n h∆°n */
  padding: 10px 5px 20px 5px; 
  text-align: center;
  overflow-x: hidden;
  font-size: 14px; 
}
@keyframes bgMove {
  0% {background-position: 0% 50%;}
  50% {background-position: 100% 50%;}
  100% {background-position: 0% 50%;}
}

h1 {
  font-size: 1.8rem; 
  font-weight: 800;
  color: #006cff;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
  /* THAY ƒê·ªîI: ƒê∆∞a ti√™u ƒë·ªÅ l√™n s√°t m√©p tr√™n */
  margin-top: 10px; 
  margin-bottom: 20px;
  letter-spacing: 0.5px;
  animation: fadeDown 1s ease-out;
}
@keyframes fadeDown {
  from {opacity: 0; transform: translateY(-20px);}
  to {opacity: 1; transform: translateY(0);}
}

/* CARD */
.container {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(12px);
  border-radius: 18px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.1), inset 0 0 15px rgba(0,140,255,0.08);
  width: 100%;
  max-width: 250px; 
  padding: 20px; 
  margin-bottom: 20px;
  border: 1px solid rgba(0,123,255,0.2);
  transition: all 0.4s ease;
}
.container:hover {
  transform: translateY(-3px) scale(1.01);
  box-shadow: 0 10px 25px rgba(0,123,255,0.25);
}

/* INPUT ƒê√É S·ª¨A ƒê·ªîI */
label {
  display: block;
  font-weight: 600;
  color: #004b9a;
  margin-bottom: 4px;
  font-size: 0.9rem; 
}

input {
  width: 70%; 
  max-width: 180px; 
  padding: 8px; 
  margin: 8px auto 15px auto; 
  border-radius: 8px;
  border: 1px solid #d6e4ff;
  background: linear-gradient(145deg, #fdfdff, #eef5ff);
  font-size: 14px; 
  text-align: center;
  transition: all 0.3s ease;
  display: block;
}
input:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 8px rgba(0,123,255,0.3);
  transform: scale(1.03);
}

/* BUTTON */
button {
  background: linear-gradient(90deg, #007bff, #00aaff, #6a5af9);
  background-size: 200% 100%;
  color: #fff;
  font-weight: 600;
  font-size: 14px; 
  border-radius: 10px; 
  width: 95%;
  max-width: 250px;
  padding: 10px; 
  cursor: pointer;
  border: none;
  transition: all 0.4s ease;
  box-shadow: 0 4px 10px rgba(0,123,255,0.3);
  position: relative;
  overflow: hidden;
}
button:hover {
  background-position: 100% 0;
  transform: translateY(-1px) scale(1.01);
  box-shadow: 0 8px 20px rgba(0,123,255,0.4);
}
button:active {
  transform: scale(0.97);
}
button.loading::before {
  content: '';
  display: inline-block;
  width: 14px; height: 14px;
  margin-right: 8px;
  border: 3px solid rgba(255,255,255,0.3);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin {to {transform: rotate(360deg);}}

/* RESULT */
#result {
  opacity: 0;
  transform: translateY(15px);
  transition: opacity 0.7s ease, transform 0.7s ease;
}
#result.show {
  opacity: 1;
  transform: translateY(0);
}
h2 {
  color: #006ae0;
  text-align: center;
  font-size: 1.1rem; 
  margin-bottom: 10px;
  position: relative;
}
h2::after {
  content: "";
  display: block;
  width: 50px;
  height: 2px;
  margin: 6px auto;
  background: linear-gradient(90deg, #007bff, #6a5af9);
  border-radius: 1px;
  animation: glow 2s infinite alternate;
}
@keyframes glow {
  from {opacity: 0.4;}
  to {opacity: 1;}
}

/* TABLE */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,123,255,0.1);
  border: 1px solid rgba(0,123,255,0.2);
  animation: fadeIn 0.8s ease forwards;
}
th {
  background: linear-gradient(180deg, #007bff, #005ecb);
  color: #fff;
  padding: 5px; 
  font-size: 0.85rem; 
}
td {
  padding: 5px; 
  font-size: 0.85rem; 
  border-bottom: 1px solid rgba(0,123,255,0.1);
  background: #fafdff;
  text-align: center;
}
tr:nth-child(even) td { background: #eef4ff; }
tr:hover td {
  background: #e0ecff;
  box-shadow: inset 0 0 6px rgba(0,123,255,0.2);
  transform: scale(1.01);
}
.animated-row {opacity: 0; animation: slideIn 0.4s ease-out forwards;}
@keyframes slideIn {
  from {opacity: 0; transform: translateY(5px);}
  to {opacity: 1; transform: translateY(0);}
}

/* RESPONSIVE */
@media (max-width: 480px) {
  /* ƒêi·ªÅu ch·ªânh th√™m cho m√†n h√¨nh nh·ªè */
  body {font-size: 13px; padding: 5px 5px 15px 5px;}
  h1 {font-size: 1.6rem; margin-top: 5px;}
  .container {max-width: 95%; padding: 15px;}
  input {width: 85%; max-width: 150px;}
  button {width: 100%;}
  th, td {font-size: 0.8rem; padding: 4px;}
}
</style>
</head>
<body>

<h1>üßæ L·ªãch Tr√¨nh Ch·∫°y M√°y</h1>

<div class="container">
  <label for="startTime">‚è∞ Gi·ªù B·∫Øt ƒê·∫ßu:</label>
  <input type="text" id="startTime" placeholder="HH:MM ho·∫∑c 8h30">

  <label for="runTime">‚öôÔ∏è Th·ªùi Gian 1 Roll:</label>
  <input type="text" id="runTime" placeholder="VD: 1:15 ho·∫∑c 75">

  <label for="numRolls">üéûÔ∏è S·ªë Roll C·∫ßn Ch·∫°y:</label>
  <input type="number" id="numRolls" value="0" min="0"
    onfocus="if(this.value=='0')this.value='';"
    onblur="if(this.value=='')this.value='0';">

  <button id="calculateBtn" onclick="calculateSchedule()">üöÄ T√≠nh L·ªãch Tr√¨nh</button>
</div>

<div id="result" class="container">
  <p style="text-align:center;color:#777;">Nh·∫≠p th√¥ng tin ƒë·ªÉ xem l·ªãch tr√¨nh...</p>
</div>

<script>
function parseTime(input) {
  input = input.trim().toLowerCase().replace(/[h\s]/g, ':');
  if (/^\d{1,2}:\d{1,2}$/.test(input)) {
    let [h, m] = input.split(':').map(Number);
    return h * 60 + (m || 0);
  }
  if (/^\d{3,4}$/.test(input)) {
    let h = Math.floor(input / 100), m = input % 100;
    return h * 60 + m;
  }
  let n = parseInt(input);
  return isNaN(n) ? 0 : n;
}

// H√†m format ƒë√£ ƒë∆∞·ª£c s·ª≠a ƒë·ªïi ƒë·ªÉ ch·ªâ tr·∫£ v·ªÅ th·ªùi gian HH:MM
function formatMinutesToTime(total) {
  // L·∫•y t·ªïng s·ªë ph√∫t v∆∞·ª£t qua 00:00 c·ªßa ng√†y b·∫Øt ƒë·∫ßu
  const t = total % (24 * 60); 
  // Chuy·ªÉn ƒë·ªïi th√†nh gi·ªù v√† ph√∫t trong 24 gi·ªù
  const h = Math.floor(t / 60), m = t % 60; 
  // Tr·∫£ v·ªÅ ƒë·ªãnh d·∫°ng HH:MM
  return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;
}

function calculateSchedule() {
  const btn = document.getElementById('calculateBtn');
  const resultDiv = document.getElementById('result');
  btn.innerHTML = ''; btn.classList.add('loading');

  setTimeout(() => {
    const startStr = document.getElementById('startTime').value;
    const runStr = document.getElementById('runTime').value;
    const rolls = parseInt(document.getElementById('numRolls').value);
    const startMin = parseTime(startStr);
    const runMin = parseTime(runStr);

    btn.classList.remove('loading');
    btn.innerHTML = 'üöÄ T√≠nh L·ªãch Tr√¨nh';

    if (!startStr || !runStr || isNaN(rolls) || rolls <= 0 || runMin <= 0) {
      resultDiv.innerHTML = '<p style="color:red;text-align:center;">‚ö†Ô∏è Vui l√≤ng nh·∫≠p ƒë·ªß v√† h·ª£p l·ªá.</p>';
      resultDiv.classList.add('show');
      return;
    }

    let total = startMin;
    let html = '<h2>üìã L·ªãch Tr√¨nh Chi Ti·∫øt</h2>';
    html += '<table><thead><tr><th>Roll</th><th>B·∫Øt ƒê·∫ßu</th><th>K·∫øt Th√∫c</th></tr></thead><tbody>';
    for (let i = 1; i <= rolls; i++) {
      const st = formatMinutesToTime(total);
      const et = formatMinutesToTime(total + runMin);
      html += `<tr class="animated-row" style="animation-delay:${i * 0.07}s;"><td>Roll ${i}</td><td>${st}</td><td>${et}</td></tr>`;
      total += runMin;
    }
    html += '</tbody></table>';
    resultDiv.innerHTML = html;
    resultDiv.classList.add('show');
  }, 400);
}
</script>
</body>
</html>
